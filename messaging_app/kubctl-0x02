#!/bin/bash

# Script: kubctl-0x02
# Purpose: Deploy blue and green versions, check logs for errors

echo "🚀 Applying blue deployment..."
kubectl apply -f blue_deployment.yaml

echo "🚀 Applying green deployment..."
kubectl apply -f green_deployment.yaml

echo "🔍 Checking pods..."
kubectl get pods -l app=messaging

echo "📜 Checking logs for green deployment..."
GREEN_POD=$(kubectl get pods -l version=green -o jsonpath="{.items[0].metadata.name}")
kubectl logs $GREEN_POD

echo "✅ Blue-Green deployment applied. You can now switch traffic in kubeservice.yaml."
